# VFiles 示例环境变量

# 服务器端口
PORT=3000

# 环境
NODE_ENV=production

# Git 仓库
REPO_PATH=./data
REPO_MODE=worktree

# 用户系统（v1.1.0）
# 开启后，除 /api/auth 与 /health 外的 API 都需要登录
ENABLE_AUTH=false
# IMPORTANT: ENABLE_AUTH=true 时必须设置（用于签名 cookie）
AUTH_SECRET=
AUTH_COOKIE_NAME=vfiles_session
# 默认 7 天
AUTH_TOKEN_TTL_SECONDS=604800
# 用户数据存储
AUTH_STORAGE_PATH=./.vfiles_auth/users.json
# 是否允许自助注册
AUTH_ALLOW_REGISTER=true

# 多用户隔离（v1.1.0）
# 开启后，每个用户使用独立仓库路径：
# - worktree: <REPO_BASE_DIR>/<username>
# - bare:     <REPO_BASE_DIR>/<username>.git
MULTI_USER_ENABLED=false
REPO_BASE_DIR=./.vfiles_repos

# CORS
CORS_ORIGIN=*

# 安全：允许访问的路径前缀（逗号分隔，留空表示允许全部）
ALLOWED_PATH_PREFIXES=

# 限流
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120

# 上传（分块）
UPLOAD_CHUNK_SIZE=5242880
UPLOAD_MAX_CHUNK_SIZE=20971520
UPLOAD_TEMP_DIR=./.vfiles_uploads
UPLOAD_SESSION_TTL_MS=86400000

# 下载缓存
DOWNLOAD_CACHE_DIR=./.vfiles_download_cache
DOWNLOAD_CACHE_TTL_MS=21600000

# Git 查询缓存
GIT_QUERY_CACHE_ENABLED=true
GIT_QUERY_CACHE_TTL_MS=300000
GIT_QUERY_CACHE_LIST_FILES_MAX=300
GIT_QUERY_CACHE_FILE_HISTORY_MAX=300
GIT_QUERY_CACHE_LAST_COMMIT_MAX=3000
GIT_QUERY_CACHE_DEBUG=false

# Git LFS
ENABLE_GIT_LFS=true
GIT_LFS_TRACK_PATTERNS=*.png,*.jpg,*.jpeg,*.gif,*.webp,*.pdf,*.zip,*.mp4
